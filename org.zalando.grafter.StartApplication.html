<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <title>Start the application</title>
    <link href="./images/s2.ico"                                   type="image/x-icon" rel="specs2 icon"/>
    <link href="./css/opensans-fonts.css"                          type="text/css"     rel="stylesheet" />
    <link href="./css/bootstrap.min.css"                           type="text/css"     rel="stylesheet" />
    <link href="./css/font-awesome.min.css"                        type="text/css"     rel="stylesheet" />
    <link href="./css/prettify.css"                                type="text/css"     rel="stylesheet" />
    <link href="./css/tabber.css"                                  type="text/css"     rel="stylesheet" />
    <link href="./css/tipuesearch.css"                             type="text/css"     rel="stylesheet" />
    <link href="./css/specs2.css"                                  type="text/css"     rel="stylesheet" />
    <link href="./css/specs2-user.css"                             type="text/css"     rel="stylesheet" />

    <script src="./javascript/jquery.js"                           type="text/javascript"></script>
    <script src="./javascript/jquery.jstree.js"                    type="text/javascript"></script>
    <script src="./javascript/tabber.js"                           type="text/javascript"></script>
    <script src="./javascript/tabber_start.js"                     type="text/javascript"></script>
    <script src="./javascript/prettify.js"                         type="text/javascript"></script>
    <script src="./javascript/specs2.js"                           type="text/javascript"></script>
    <script src="./javascript/specs2-user.js"                      type="text/javascript"></script>
    <script src="./javascript/tipuesearch/tipuesearch_set.js"      type="text/javascript"></script>
    <script src="./javascript/tipuesearch/tipuesearch_contents.js" type="text/javascript"></script>
    <script src="./javascript/tipuesearch/tipuesearch.min.js"      type="text/javascript"></script>

</head>
<body onload="prettyPrint(); tabberAutomatic([])">

<div class="container">

<div class="col-md-2 col-sm-3 col-xs-3 sidebar-outer">
<div class="col-md-2 fixed">

<!-- search box -->
<div class="search-box">
  <form action="search.html">
    <input type="text" name="q" id="tipue_search_input" autocomplete="off" required>
  </form>
</div>

<!-- table of contents -->
<div id="tree"><ul>
                <li id="index"><a href="index.html" title="Welcome to Grafter!">Welcome to Graf...</a>
      <ul></ul>
      <ul>
                    <ul>
                <li id="org-zalando-grafter-quickstart"><a href="org.zalando.grafter.QuickStart.html" title="Quick Start">Quick Start</a>
      <ul><ul><li><a href="org.zalando.grafter.QuickStart.html#installation" title="Installation">Installation</a>
          
        </li><li><a href="org.zalando.grafter.QuickStart.html#your-first-application" title="Your first application">Your first appl...</a>
          
        </li></ul></ul>
      <ul>
                    
                  </ul>
    </li>
              </ul><ul>
                <li id="org-zalando-grafter-createsingletons"><a href="org.zalando.grafter.CreateSingletons.html" title="Singletons">Singletons</a>
      <ul><ul><li><a href="org.zalando.grafter.CreateSingletons.html#make-singletons" title="Make singletons">Make singletons</a>
          
        </li><li><a href="org.zalando.grafter.CreateSingletons.html#make-singletons-based-on-values" title="Make singletons based on values">Make singletons...</a>
          <ul><li><a href="org.zalando.grafter.CreateSingletons.html#modify-components" title="Modify components">Modify components</a>
          
        </li><li><a href="org.zalando.grafter.CreateSingletons.html#make-the-singletons" title="Make the singletons">Make the single...</a>
          
        </li></ul>
        </li></ul></ul>
      <ul>
                    
                  </ul>
    </li>
              </ul><ul>
                <li id="org-zalando-grafter-startapplication"><a href="org.zalando.grafter.StartApplication.html" title="Start the application">Start the appli...</a>
      <ul><ul><li><a href="org.zalando.grafter.StartApplication.html#stop-the-application" title="Stop the application">Stop the applic...</a>
          
        </li></ul></ul>
      <ul>
                    
                  </ul>
    </li>
              </ul><ul>
                <li id="org-zalando-grafter-testapplication"><a href="org.zalando.grafter.TestApplication.html" title="Test the application">Test the applic...</a>
      <ul></ul>
      <ul>
                    
                  </ul>
    </li>
              </ul><ul>
                <li id="org-zalando-grafter-testconfiguration"><a href="org.zalando.grafter.TestConfiguration.html" title="Test the configuration">Test the config...</a>
      <ul><ul><li><a href="org.zalando.grafter.TestConfiguration.html#collecting-ancestors" title="Collecting ancestors">Collecting ance...</a>
          
        </li><li><a href="org.zalando.grafter.TestConfiguration.html#visual-inspection" title="Visual inspection">Visual inspection</a>
          <ul><li><a href="org.zalando.grafter.TestConfiguration.html#configuration" title="Configuration">Configuration</a>
          
        </li></ul>
        </li><li><a href="org.zalando.grafter.TestConfiguration.html#with-specs2" title="With specs2">With specs2</a>
          
        </li></ul></ul>
      <ul>
                    
                  </ul>
    </li>
              </ul><ul>
                <li id="org-zalando-grafter-finallytagless"><a href="org.zalando.grafter.FinallyTagless.html" title="Finally tagless">Finally tagless</a>
      <ul></ul>
      <ul>
                    
                  </ul>
    </li>
              </ul><ul>
                <li id="org-zalando-grafter-typesafeconfigurations"><a href="org.zalando.grafter.TypesafeConfigurations.html" title="Typesafe configurations">Typesafe config...</a>
      <ul><ul><li><a href="org.zalando.grafter.TypesafeConfigurations.html#making-it-typesafe" title="Making it typesafe">Making it typesafe</a>
          
        </li><li><a href="org.zalando.grafter.TypesafeConfigurations.html#readers" title="Readers">Readers</a>
          
        </li></ul></ul>
      <ul>
                    
                  </ul>
    </li>
              </ul><ul>
                <li id="org-zalando-grafter-concepts"><a href="org.zalando.grafter.Concepts.html" title="Main concepts">Main concepts</a>
      <ul><ul><li><a href="org.zalando.grafter.Concepts.html#readers-all-the-way-down" title="Readers all the way down">Readers all the...</a>
          
        </li><li><a href="org.zalando.grafter.Concepts.html#deal-with-interfaces" title="Deal with interfaces">Deal with inter...</a>
          
        </li><li><a href="org.zalando.grafter.Concepts.html#warning" title="Warning">Warning</a>
          
        </li><li><a href="org.zalando.grafter.Concepts.html#summary" title="Summary">Summary</a>
          
        </li></ul></ul>
      <ul>
                    
                  </ul>
    </li>
              </ul><ul>
                <li id="org-zalando-grafter-comparisons"><a href="org.zalando.grafter.Comparisons.html" title="Comparisons">Comparisons</a>
      <ul></ul>
      <ul>
                    
                  </ul>
    </li>
              </ul>
                  </ul>
    </li>
              </ul></div><script>$(function () { $('#tree').jstree({'core':{'initially_open':['index','org-zalando-grafter-startapplication'], 'animation':200}, 'themes' : {'theme': 'default','url': './css/themes/default/style.css'}, 'plugins':['themes', 'html_data']}); });</script>

</div>
</div>


<div class="col-md-10 col-sm-9 col-xs-9">
<h1>Start the application</h1>
<div id="tipue_search_content"></div>

<p>An application which is <link class="ok"> <a href="org.zalando.grafter.Concepts.html" tooltip="" class="ok">instantiated</a></link> and has <link class="ok"> <a href="org.zalando.grafter.CreateSingletons.html" tooltip="" class="ok">proper singletons</a></link> can now be started.</p>
<p>The components which can be “started” need to implement the <code class="prettyprint">Start</code> interface and define a <code class="prettyprint">start</code> method:</p>
<pre><code class="prettyprint">import org.zalando.grafter.{Start, StartResult}
import cats.Eval

case class DoobieDatabase(config: DatabaseConfig) extends Start {
  def start: Eval[StartResult] =
    StartResult.eval(&quot;starting the database&quot;) {
      println(&quot;start the database here&quot;)
    }
}</code></pre>
<p>Then starting the whole application is just a matter of calling <code class="prettyprint">startAll</code>:</p>
<pre><code class="prettyprint">import org.zalando.grafter.syntax.rewriter._

val start: Eval[List[StartResult]] =
  application.startAll

val results = start.value

if (results.forall(_.success))
  println(&quot;ok&quot;)
else
  println(&quot;Something went wrong &quot;+results.mkString(&quot;\n&quot;))</code></pre>
<p><code class="prettyprint">startAll</code> is going to recursively, <strong>bottom up</strong>, call all the components with a <code class="prettyprint">Start</code> interface and collect the <code class="prettyprint">StartResults</code>.</p>
<h3 id="stop-the-application">Stop the application</h3>
<p>The application can also be stopped in the same manner. <code class="prettyprint">stopAll</code> will stop each component implementing <code class="prettyprint">Stop</code> from the top down.</p>
<p>The major difference between the <code class="prettyprint">startAll</code> and <code class="prettyprint">stopAll</code> is that <em>all</em> the components will try to be stopped regardless of failures.</p>
</div>

<script>
$(document).ready(function() {
  $('#tipue_search_input').tipuesearch({
    'show': 6
  });
});
</script>
</div>

</body>
</html>